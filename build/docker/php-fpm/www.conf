; PHP-FPM pool for trafex/wordpress (Alpine php84)
; Replaces trafex zzz_custom.conf so our limits apply (avoids timeout/504)
[www]

user = www-data
group = www-data

listen = /var/run/php/php-fpm.sock

; Kill stuck requests after 60s so workers don't pile up (avoids 504/timeout)
request_terminate_timeout = 60

pm = ondemand
pm.max_children = 20
pm.process_idle_timeout = 10s
pm.max_requests = 1000

; From trafex defaults
clear_env = no
catch_workers_output = yes
decorate_workers_output = no
pm.status_path = /fpm-status
ping.path = /fpm-ping
